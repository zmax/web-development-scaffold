# 0002. 採用 React Query 進行資料獲取

- **狀態 (Status)**: 已接受 (Accepted)
- **日期 (Date)**: 2025-07-07

## 背景 (Context)

本專案需要一個強大且可靠的函式庫來管理與後端 API 互動所產生的伺服器狀態，包含資料的獲取、快取、同步與更新。主要的候選方案為 `@tanstack/react-query` (React Query) 和 `swr`。專案的目標是提供一個功能完備、可擴展、且能體現最佳實踐的開發骨架。

## 決策 (Decision)

我們決定**標準化採用 `@tanstack/react-query`** 作為專案唯一的伺服器狀態管理函式庫。

所有與 API 的互動，包含：

- **資料讀取 (Read)**: 必須使用 `useQuery`。
- **資料變更 (Create, Update, Delete)**: 必須使用 `useMutation`。

`swr` 套件將從專案依賴中移除，以確保技術棧的統一性。

## 後果 (Consequences)

- **正面影響**:
  - **功能統一且強大**: 為專案提供了涵蓋資料獲取到資料變更的完整解決方案，並內建了樂觀更新、分頁查詢等進階功能，有利於未來擴展。
  - **極佳的開發者體驗**: 內建的 `ReactQueryDevtools` 大幅提升了除錯效率和對快取狀態的可見性。
  - **清晰的架構**: 強化了「伺服器狀態」與「客戶端狀態」(由 Zustand 管理) 之間的界線，使狀態管理職責分明。

- **負面影響**:
  - **套件體積**: 相較於 `swr`，`React Query` 的打包體積稍大。
  - **學習曲線**: 對於新加入且不熟悉 `React Query` 的開發者，其概念（如 Query Keys）比 `swr` 更為複雜。

- **取捨 (Trade-offs)**: 我們選擇犧牲微小的套件體積，來換取顯著的開發效率、功能完整性與長期可維護性。這完全符合本專案作為一個「最佳實踐開發骨架」的核心定位。
